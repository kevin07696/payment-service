# ===================================
# STAGING ENVIRONMENT CONFIGURATION
# ===================================
# Use this for Railway staging deployment
# Copy to Railway Variables in your staging service

# Server Configuration
PORT=8080
HTTP_PORT=8081
ENVIRONMENT=staging

# Database Configuration (Railway auto-provides DATABASE_URL)
# If using Railway Postgres, these are not needed
# DATABASE_URL is automatically set by Railway
DB_SSL_MODE=require  # Railway requires SSL

# ===================================
# EPX PAYMENT GATEWAY (SANDBOX)
# ===================================
# ⚠️  IMPORTANT: Use SANDBOX credentials for staging
# Used for: Processing credit card transactions in staging
# Docs: EPX Server Post API & Browser Post API

# EPX Server Post API (server-to-server transactions: Sale, Auth, Capture, Refund, Void)
# REQUIRED - no fallback
EPX_SERVER_POST_URL=https://secure.epxuap.com

# EPX Key Exchange API (generates TAC tokens for Browser Post)
# REQUIRED - no fallback
EPX_KEY_EXCHANGE_URL=https://keyexch.epxuap.com

# EPX Browser Post API (browser-based payment forms for PCI compliance)
# REQUIRED - no fallback
EPX_BROWSER_POST_URL=https://services.epxuap.com/browserpost/

EPX_TIMEOUT=30

# EPX Sandbox Credentials (4-part key)
# These are official EPX UAT test credentials
EPX_CUST_NBR=9001
EPX_MERCH_NBR=900300
EPX_DBA_NBR=2
EPX_TERMINAL_NBR=77

# EPX Browser Post MAC (Merchant Authorization Code)
EPX_MAC=2ifP9bBSu9TrjMt8EPh1rGfJiZsfCb8Y

# ===================================
# NORTH MERCHANT REPORTING API
# ===================================
# Used for: Retrieving merchant data, disputes, chargebacks (NOT for payments)
# Note: Same URL for both sandbox and production

NORTH_MERCHANT_REPORTING_URL=https://api.north.com
NORTH_TIMEOUT=30

# Browser Post Configuration
# Set this to your Railway app URL after deployment
CALLBACK_BASE_URL=https://your-app-name.up.railway.app

# Cron Authentication
# Generate a secure random string for staging
CRON_SECRET=your-staging-secret-here

# Logging
LOG_LEVEL=debug  # More verbose for staging

# ===================================
# SECRET MANAGER CONFIGURATION
# ===================================
# Used for: Managing merchant MAC keys and sensitive credentials

# Secret Manager Type
SECRET_MANAGER=mock     # Options: 'mock' (for testing), 'gcp' (recommended for staging)

# Cache TTL (in minutes)
SECRET_CACHE_TTL_MINUTES=5

# GCP Secret Manager (when SECRET_MANAGER=gcp)
# Recommended for staging to test production-like setup
# GCP_PROJECT_ID=your-gcp-project-staging
# GOOGLE_APPLICATION_CREDENTIALS=/path/to/gcp-service-account.json

# Secret Path Format:
# Local (mock): Read from ./secrets/{merchant_slug}/mac.txt
# GCP: Format as "payment-service/merchants/{merchant_id}/mac"
